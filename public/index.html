<!DOCTYPE html>
<html>
    <head>
         <!-- update the version number as needed -->
    <script defer src="/__/firebase/9.0.2/firebase-app-compat.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/9.0.2/firebase-auth-compat.js"></script>
    <script defer src="/__/firebase/9.0.2/firebase-database-compat.js"></script>
    <script defer src="/__/firebase/9.0.2/firebase-firestore-compat.js"></script>
    <script defer src="/__/firebase/9.0.2/firebase-functions-compat.js"></script>
    <script defer src="/__/firebase/9.0.2/firebase-messaging-compat.js"></script>
    <script defer src="/__/firebase/9.0.2/firebase-storage-compat.js"></script>
    <script defer src="/__/firebase/9.0.2/firebase-analytics-compat.js"></script>
    <script defer src="/__/firebase/9.0.2/firebase-remote-config-compat.js"></script>
    <script defer src="/__/firebase/9.0.2/firebase-performance-compat.js"></script>
    <!-- 
      initialize the SDK after all desired features are loaded, set useEmulator to false
      to avoid connecting the SDK to running emulators.
    -->
    <script defer src="/__/firebase/init.js?useEmulator=true"></script>
    </head>
    <body>
        <h1 id="title">와 firebase 처음 써봐여!</h1>
        <p>my first firebase</p>
        <a href="javascript:blueTitleByJS()">to blue</a>
        <a href="javascript:redTitleByJS()">to red</a>
        
        <a href="javascript:onLoginByJS()"><button>로그인하기</button></a>
        
        <div id="loginOn" style="display: none;">
          <img id="loginImg" src="user._delegate.photoURL" />
        </div>
            
        <script>
            function blueTitleByJS(){
                let x = document.getElementById("title");
                x.innerText="큐시즘 화이팅";
                x.style.color="blue";
            }
            function redTitleByJS(){
                let x = document.getElementById("title");
                x.innerText="와 firebase 처음 써봐여!";
                x.style.color="red";
            }

            function onLoginByJS(){
              var provider = new firebase.auth.GoogleAuthProvider();

              //팝업 창을 사용
              firebase.auth()
                .signInWithPopup(provider)
                .then((result) => {
                  /** @type {firebase.auth.OAuthCredential} */
                  var credential = result.credential;

                  // This gives you a Google Access Token. You can use it to access the Google API.
                  var token = credential.accessToken;
                  console.log(token);
                  // The signed-in user info.
                  var user = result.user;
                  console.log(user._delegate.photoURL)
                  alert(user.email)
                  const loginOn = document.getElementById("loginOn");
                  document.getElementById("loginImg").src = user._delegate.photoURL;
                  loginOn.style.display = "block";



                }).catch((error) => {
                  // Handle Errors here.
                  var errorCode = error.code;
                  var errorMessage = error.message;
                  // The email of the user's account used.
                  var email = error.email;
                  // The firebase.auth.AuthCredential type that was used.
                  var credential = error.credential;
                  // ...
                });
        }
        </script>
    </body>
</html>

